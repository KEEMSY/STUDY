# Consistency 일관성
객체지향 프로그래밍에서 `일관성`이란, 객체가 정확하고 신뢰할 수 있는 정보를 가지고 있음을 나타낼 때 사용된다.
- `무결성`(integrity): 데이터 베이스와 같은 다른 컴퓨터 과학분야에서 사용되며, 정보를 정확하게 유지하는 것을 의미한다.
  - 데이터베이스에서의 일관성은 데이터의 `가용성`과 관련이 있다.


객체지향 프로그래밍의 가장 중요한 장점은 객체가 항상 일관된 상태를 유지하도록 보장한다는 것이다.
따라서 객체지향 프로그래밍을 하기 위해서는 `일관성`을 유지하는 방법을 알아야 하며, 항상 `일관성`을 유지해야 할 수 있어야 한다.
- 객체가 `일관성`을 유지한다면, 객체의 내부상태가 프로그램 요구사항이나 사용자 기대에 잘 맞춰 조화를 이룰 수 있게 된다.
- 객체가 `일관성`을 유지한다면, 객체가 올바르게 동작하며 정확한 결과를 제공하므로 고장이 적고, 신뢰할 수 있는 소프트 웨어를 만들 수 있다.

> 캡슐화(encapsulation)
> - 데이터를 객체 안에 저장하고 연산을 통해서만 이를 조작할 수 있게 하는 개념
> - 캡슐화를 통해 코드 기반의 다른 부분에 영향을 주지 않고 클래스 내부의 세부 사항을 변경할 수 있다.


## 캡슐화를 유지하는 방법

### 클래스가 스스로 일관성을 책임지게 한다.

어떤 클래스가 데이터 일고나성을 책임져야 할지 확신이 서지 않을 때에는 데이터를 포함하는 클래스가 일관성을 보장하도록 만드는 것이 좋다.
- 클래스는 항상 상태를 일관성 있게 유지해야할 책임이 있다.

### 전체 작업과 복잡한 일관성 검사를 캡슐화 한다.
객체 내부에 있는 정보만으로는 일관성 검사가 불가능하거나 너무 복잡해서 클래스 밖에 구현해야할 수도 있다. 이런 경우, 일관성 검사와 비즈니스 로직을 별도의 클래스로 캡슐화 하는 것이 필요하다.
- 이 역할을 하는 것이 서비스 클래스 이다.
  - 서비스 클래스는엔터티가 스스로 제공할 수 없는 일관성을 보장한다.

클라이언트는 절대 일관성 검사를 책임지지 않아야하며, 기본적으로 클래스가 일관성을 검사해야 한다.

> **도메인 클래스**
>
>도메인 클래스는 가능한 순수한 상태를 유지해야 하며, 데이터와 그 데이터를 조작하는 메서드만 포함하는 것이 낫다.
