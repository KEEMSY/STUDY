# **Factory Method 패턴**

> ### **요약**

|Factory Method|내용|
|---|---|
|**목적**|객체의 구조를 느슨한 관계로 만들어 생성 시 확장과 수정을 용이하게 한다.|
|**설명**|객체의 생성을 별개의 클래스로 구축하여 위임 처리(*객체의 요청과 생성을 별도의 클래스로 분리함으로써 느슨한 결합 관계로 변경한다.*)팩토리 패턴은 프록시 패턴과 결합하면 객체 생성을 위임 받을 때 권한에 따라 접근하는 것을 제어할 수 있다. 이는 특정한 객체 생성에서 보안 또는 권한 등의 처리가 필요할 때도 응용할 수 있다.|
|**방법**|객체 생성을 위임할 수 있는 클래스를 정의한다.|
|**장점**|코드에서 생성과 관련된 모든 처리를 별도의 클래스 객체로 위임할 수 있으며, 사용과 생성을 분리하는 과정에서 중복된 코드를 정리하는 효과도 있다. 이는 유연성과 확장성의 개선을 의미한다 말할 수 있다. 마지막으로 어떤 객체를 생성할지 모르는 초기 단계 코드에 매우 유용하다.|
|**단점**|관리해야 할 클래스가 늘어난다.(이를 해결하기 위해 단순 팩토리가 존재한다.)|
||

- 객체 생성은 위한 패턴이다.
- 객체 생성에 필요한 과정을 템플릿처럼 정해놓고 각 과정을 다양하게 구현이 가능하다.
- 이를 통해 객체 생성에 필요한 전처리나 후처리를 유연하게 처리할 수 있다.
- 원하는 시점에서 구체적으로 생성할 클래스를 유연하게 정할 수 있다.
- 객체 생성에 대한 인터페이스와 구현의 분리시킴으로서, 시스템에 확정성과 유지보수성을 높여준다.
- 객체를 생성하고 캡슐화 하여 위임하는 것을 공장(Factory) 라고한다.

생성에 대한 부분과 생성에 대한 구현이 완전히 분리 되어 있다는 것은 **인터페이스 부분이 구현부분을 전혀 모르고 있음을 의미**한다.
이는 필요하다면 인터페이스 부분만을 별도의 패키지로 분리하여 개발 할 수 있다.마찬가지로 구현부분도 별도의 패키지로 구분하여 개발 할 수 있다.
뿐만 아니라, 기존의 구현부분은 그대로 사용하고, 새로운 구현부분을 추가하여 시스템의 기능을 확장할 수 있다.

**객체의 생성 작업을 분리하는 방법**에는 방법에 따라 **2개**로 나눌 수 있다.

- **클래스**로 분리
- **메서드**로 분리

팩토리 패턴이 **여러 객체의 생성을 책임질 경우** 생성할 객체를 선택할 조건 로직으로, **외부의 매개변수 값** 을 받아 처리한다.

- 외부의 매개변수는 **상수(const)** 를 사용하는 것이 좋다.

<br>

> ### **단순 팩토리(=정적 팩토리)**

팩토리 패턴의 특징과 처리 로직을 간단하게 작성한 것으로, 기존 팩토리 패턴에서 단점이었던 **Factory 객체를 생성하지 않고** 대신 자신의 객체에 **필요한 객체를 생성하는 전용 메서드를 추가**한다.

- 객체 생성 과정이 복잡하지 않을 경우 추가 클래스 파일을 생성하지 않고도 팩토리 패턴을 적용할 수 있는 것이 장점이며, 생성자 디자인 패턴 중 가장 많이 사용된다.

<br><hr><br>

## **예제 코드**

<br>

### **코드 구조**

![FactoryMethod.png](/img/FactoryMethod.png)

<br>

- ### **설명**
    
    `Factory` 와 `Item` 이 **생성에 대한 인터페이스 부분**이며,
    `ItemFactory` 와 `Sword`, `Shield`, `Bow` 가 **생성에 대한 구현 부분** 이다.
    `ItemFactory` 클래스는 `Item` 을 생성해주는 절차를 정해주는 역할을 담당한다.
    `Factory` 클래스의 추상 메서드를 구현하는 클래스로 `Item` 객체를 생성하기 위한 각 절차를 구체적으로 구현하는 코드가 작성되는 클래스이다.

    `Factory` 는 추상 클래스로서 `Item` 을 생성해주는 각 절차에 대한 구체적인 구현은 정해져 있지 않다.

    `Item` 인터페이스는 앞으로 생성될 다양한 종류의 `Item` 을 동일한 타입으로 처리할 수 있도록 해준다.

    `Sword`, `Shield` `Bow` 는 `Item` 인터페이스에 대한 구현 클래스 이다.
