# **ch.1 나에게 도메인 주도 설계는**

> ### **좋은, 나쁜 그리고 효과적인 설계**

*설계하지 않은 것이 낮은 비용의 소프트웨어로 이어진다.*

소프트웨어 프로젝트는 위험에 빠져있고, 모든 팀들은 시스템 유지 보수와 매일 코드 및 데이터 패치를 위해 존재한다.

다음은 **서서히 확산되는 문제들**이다. (*이 문제점들은 DDD 를 통해 아래의 문제들을 피하는데 도윰을 받을 수 있다.*)

- 소프트웨어 개발을 이익 중심이 아닌 **원가 중심으로 생각하는 문제**
- 개발자가 너무 기술에만 몰두한 나머지 **문제를 신중하게 연구하고 설계하기 보다는 기술적으로 해결하려고 하는 문제**
  - 이것은 개발자가 기술 분야의 최신 유행인 새롭게 눈에 띄는 것만을 쫒게게 만든다.
- 데이터 베이스에 너무 큰 우선순위를 부여하고, 대부분의 논의가 **비즈니스 프로세스와 업무보다 데이터베이스 주변 솔루션센터와 데이터 모델에 집중하는 문제**
- 개발자가 **비즈니스 목적에 따라 클래스와 오퍼레이션 이름을 짓는 것에 관심을 갖지 않는 문제**
  - 이는 소프트웨어 사이에 큰 차이를 야기한다.
- **비즈니스와의 빈약한 협업**(비즈니스 이해관계자가 아무도 사용하지 않고 개발자들이 고작 일부분만 읽어보는 명세서를 작성하느라 홀로 너무 많은 시간을 보낸다.)
- 프로젝트에 대한 **예측을 매우 강하게 요구하는 문제**
  - 너무 자주 예측치를 추정하는 것은 적지 않은 시간과 노력을 예측에 할애 하도록 만들고 소프트웨어 인도가 지연되는 결과로 이어질 수 있다. 그리고 비즈니스 동인에 따라 적절히 분리된 모델이 아닌  큰 진흙 덩어리를 만들어 낸다.
- 개발자가 **비즈니스 로직을 사용자 인터페이스 컴포넌트와 영속성 컴포넌트 안에 담는 문제**
  - 종종 영속성 오퍼레이션을 비즈니스 로직 중간에 수행하기도 한다.
- **문법에 어긋나고 느리거나 권한이 없어 차단되는 데이터 베이스 쿼리들**이 사용자가 긴급하게 처리해야 하는 비즈니스 업무를 수행하지 못하도록 방해하는 문제.
- 개발자가 실제 구체적인 비즈니스 요구 대신, **현재와 상상 속 미래의 요구를 모두 고려해서 과도하게 일반화 시킨 해결 방안을 선택한 탓에 잘못된 추상화가 존재하**는 문제.
- **오퍼레이션을 수행하는 서비스가 또 다른 서비스를 직접 호출하는 강하게 결합된 서비스가 존재하는 문제**
  - 이 결합은 시스템 유지보수가 어려워질뿐만아니라 종종 비즈니스 프로세스에 문제를 일으키고 데이터가 불일치 되는 결과로 이어질 수 있다.

<br>

**설계하지 않은 것으로 기대했던 비용 절감은 심사숙고한 설계 없이 소프트웨어 제작에만 박차를 가한 사람들을 교묘하게 속였던 오류**라는 것을 이해해야한다.
<br>

***설계가 필수적인것인지, 안 해도 괜찮은지에 대한 질문은 요점에서 많이 벗어나 있다. 설계는 필연적이다. 좋은 설계의 대안은 나쁜 설계다. 절대 설계하지 않는 것이 아니다. -Book Design: A Practical Introduction by 더글라스 마틴-***

<br>

5명의소프트웨어 개발자가 설계없이 프로젝트를 함께 진행하는 상황은 5개의 서로 다른 설계가 하나로 뭉뚱그려진 것을 만들 뿐이다. 즉, 개발자들은 진짜 도메인 전문가의 혜택을 받지 못한 채 개발하면서, 하나의 비즈니스 언어에 제각각 지어낸 5개의 해석을 혼합한 결과를 만드는 것이다.

<br>

심사숙고한 설계로 소프트웨어를 제작하는 것이 비쌀것 같아 두렵다면, **앞으로 얼마나 계속해서 그 시스템을 사용해야하고, 더 나아가 나쁜 설계를 수정해야 하는 것이 얼마나 큰 비용이 들것인지 생각**해보자.

- 조직을 다른 조직과 차별화 시키고 상당한 경쟁우위를 만들어내야하는 소프트웨어를 만든다면, 특히 더 많은 고려가 필요하다.

<br>

**좋은 것과 효과적인 것은 밀접한 관련**이 있다. 그리고 이것은 우리가 소프트웨어 설계에 좀 더 노력해야 한다는 것을 명확하게 알려준다.

- 효과적인 설계는 조직이 무엇에 강점을 가져야하는지 이해시키고, 정확한 소프트웨어 모델을 생성하도록 가이드할 때 사용한다.

<br>

***대부분의 사람들은 '설계를 고민한다는 것'이 '어떻게 생긴 것인지 고민하는 것'으로 착각한다. 설계자에게 어떤 박스를 건내주고 "좋아보이게 만들어!" 라는 이야기 정도로 생각한다. 이건 우리가 생각하는 설계까 아니다. 설계는 단지 어떻게 생겼는지, 어떤 느낌인지가 아니라, 그게 어떻게 동작하는지에 대한 것이다. -스티브 잡스-***

<br><hr><br>

> ### **전략적 설계**

![strategicDesign](/img/strategicDesign.png)

`전략적 설계`부터 시작하지 않으면 절대 효과적인 방법으로 `전술적인 설계`를 적용할 수 없다.
전략적 설계는 세세한 구현으로 들어가기 앞서 두꺼운 붓 터치처럼 사용하며, **비즈니스상 전략적으로 중요한 것**, **중요도에 따라 일을 나누는 방법** 그리고 **필요에 따라 통합하는 최적의 방법**을 강조한다.

- `바운디드 컨텍스트(Bounded Context)`: 전략적 설계 패턴을 사용해 도메인 모델을 분리하는데 사용된다.
- `보편언어(Ubiquitous Language)`: 바운디드 컨텍스트 안의 도메인 모델에서 사용하는 언어를 말한다.
- `서브도메인(Subdomains)`: 기존 시스템의 제한되지 않은 복잡성을 다루며 앞으로 진행할 프로젝트 결과를 향상 시킬 수 있는 도메인.
- `컨텍스트 매핑(Context Mapping)`: 여러개의 바운디드 컨텍스트를 통합하는 방법
- `컨텍스트 맵(Context Map)`: 2개의 바운디드 컨텍스트를 통합하면서 그 사이에 존재하는 팀의 관계, 기술적 메커니즘을 정의한다.

<br>

모델의 보편언어를 개발하다 보면 개발자는 물론 도메인 전문가의 참여가 중요하다는 것을 배울 수 있다. 협업을 통해 함께 개발한 보편언어는 팀 의사소통과 소프트웨어 모델 곳곳에 보편적이고, 널리 퍼지게 될 것 이다.

<br>

> ### **전술적 설계**

전술적 설계는 도메인 모델의 세부사항들을 그리기 위해 얇은 붓을 사용하는 것과 같다. 가장 중요한 도구 중 하나는 엔터티(Entity)와 값 객체(Value Object)를 알맞은 크기의 `애그리게잇(Aggregate)`으로 묶는데 사용하는 애그리게잇 패턴이다.

- `엔터티(Entity)`
- `값 객체(Value Object)`
- `애그리게잇(Aggregate)`

<br>

**DDD는 도메인을 최대한 명확한 방법으로 모델링 하는 것에 관한 것**이다.

- `도메인 이벤트(Domain Evnents)`의 사용은 명확하게 모델링 하는 것을 도와주면서, 도메인에 발생한 것에 대해 알아야 하는 내용을 시스템과 공유하는 것을 돕는다.
- 공유할 대상이 로컬의 `바운디드 컨텍스트` 일수도 있으며, 다른 원격의 `바운디드 컨텍스트`일 수도 있다.

<br><hr><br>

> ### **학습과정과 지식의 정제**

 팀이 비즈니스 핵심 역량에 대해 배워나갈 때, DDD는 지식을 더욱 발전시킬 수 있도록 스스로와 팀에게 생각하는 법을 알려준다. 이런 학습 과정은 그룹 의사소통과 실험을 통한 발견에 대한 것이다.

- 현 상황에 대해 질문을 던지고, 소프트웨어 모델의 가정에 이의를 제기함으로써 더많이 배우고, 중요한 지식 획득은 팀 전체로 확산된다.
- 이것은 비즈니스와 팀을 위한 상당히 중요한 투자이다. 배우고 정제하는 것뿐만아니라 그것을 빨리 해내는 것을 목표로 삼아야한다.
