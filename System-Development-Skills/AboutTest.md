# 테스트에 관하여, About Test

<img width="1162" alt="테스트가 있고없고" src="https://github.com/KEEMSY/STUDY/assets/96563125/c7bb2ba7-18d2-4739-a696-5ce56192d5d0">

테스트는 상대적으로 실제 작업(코드 작성 및 개발)에 비해서는 중요도가 낮게 여겨지고 있다. 무엇보다도 테스트는 지루하고, 즐기기 어렵고, 눈에 띄는 성과가 없다고 인식되어 있기 때문인듯하다.

- 개발자들이 테스트를 싫어하는 이유는 테스트를 소프트웨어 개발과 분리된 것으로 보기 때문이라고 생각한다.
- 개발하면서 테스트를 하면 개발을 할 수 없다고 생각하기도 한다.

하지만 모순적으로, 테스트에 대하여 비판적인 사람들도 결국 테스트는 불가피하다고 생각한다. 그렇다면 테스트에 대해서 다르게 생각을 해보는 것을 추천한다.

- 테스트는 개발자의 작업에 필수적이며 개발자에게 도움이 될 수 있다. 
- 테스트를 통해 오히려 시간을 절약할 수 있다.


<br><hr>

## 테스트의 유형

<img width="1403" alt="테스트 유형" src="https://github.com/KEEMSY/STUDY/assets/96563125/f1a9379c-f60b-464a-919c-d80b3104f3a2">


테스트는 소프트웨어의 동작을 완전히 보장하는 것은 아니지만, 그 가능성을 상당히 높여준다. 이런 테스트의 유형에는 다양하나, 다양한 테스트의 종류가 중요한 것이 아닌, 테스트를 구현하는 방식에 집중해야한다. 

- 수동 테스트
	- 코드 리뷰
	- E2E 테스트
- 자동 테스트
	- 단위 테스트
	- 통합 테스트

<br>

> 수동 테스트

테스트는 수동으로 진행할 수 있다. 수동 테스트는 개발자가 코드를 직접 실행하고 그 동작을 검사하여 코드를 테스트하며, 그 유형에 따라 코드가 작동하는 방식에 대한 다양한 수준의 확신을 가져다 줄 수 있다.

- E2E: 소프트웨어에서 지원되는 모든 시나리오를 처음부터 끝까지 테스트한다.
- 코드리뷰: 코드 리뷰는 코드 스타일이나 형식에 대한 것이 아닌 다른 개발자가 가져올 수 있는 버그나 기술적 부채에 대한 리뷰를 진행한다. 비동기식 페어 프로그래밍이라고 볼 수 있다.

수동 테스트를 통해 자동화된 테스트와 비슷한 빠른 반복 주기를 얻을 수 있다.(하지만 분명히 시간이 더 필요하다.)

<br>

> 자동 테스트

프로그래머는 일반적으로 개발중인 소프트웨어를 위한 도구를 만드는데 초점을 맞춘다.

자동 테스트는 그 스코프에 따라, 더 중요하게는 소프트웨어의 동작에 대한 신뢰도를 어느정도 높이는가에 따라 다를 수 있다.

- **단위 테스트(unit test)**: 가장 작은 형태의 자동화 테스트로, 코드의 단일 단위인 public 함수 하나만 테스트 하기 때무에 작성하기 가장 쉽다. 하지만 단위가 각자 정상적으로 작동하는지 확인 할 수 있으나, 이들이 함께 작동하는지를 보장할 수 없다.
- **통합테스트(intergration test)**: 자동화된 UI 테스트가 올바른 사용자 인터페이스를 빌드하기 위해 프로덕션 코드를 실행하는 것을 말한다.

자동화 테스트는 기능의 완료에 대해 어느 정도 신뢰할 수 있도록 해주며, 낭비되는 시간을 최소화 할 수 있다.
<br><hr>

## 적합한 테스트 방법 선택하기

테스트 방법을 결정하기 위해서는 구현하거나 변경하려는 시나리오에 대한 특정 요소(위험, 비용 등) 를 인지하고 있어야 한다. 그리고 우리는 비용이 가장 적게 들면서 위험도가 가장 적은 최적의 방법을 찾아야한다. 테스트가 얼마나 많은 비용과 위험을 초래하는지에 대한 트레이드 오프를 잘 따져보아야 한다.

- 비용
	- 특정 테스트를 구현/실행하는데 얼마나 많은 시간이 필요한가?
	- 몇 번 정도 반복해야하는가?
	- 테스트 코드를 변경하려면 테스트 할 수 있는 사람이 있는가?
	- 테스트를 신뢰할 수 있게 유지하는 것이 얼마나 어려운가?
- 위험
	- 테스트 시나리오가 깨질 가능성은 얼마나 되는가?
	- 시나리오가 깨지면 사업에 얼마나 큰 영향을 주는가?
	- 시나리오가 깨지면 다른 많은 시나리오가 함께 깨지는가?(의존하는 시나리오가 존재하는가?)
	- 이 코드는 앞으로 얼마나 바뀔 것으로 예상하는가?(얼마나 자주 변경 될까?)


<br><hr>

## 올바른 테스트를 작성하는 방법

테스트를 작성하기 위해 테스트에 대해 공부를하다보면, TDD, BDD 와 같은 이론을 접할 수 있다. 분명 TDD 와 BDD 는 다르지만, 공통된 목표를 갖고 있을 것이다. 

- TDD : 주로 코드의 기능적인 부분에 중점을 두고서 테스트를 통해 코드를 개발하는 방법론
- BDD: 사용자의 관점에서 시스템을 바라보고 예시 중심의 개발 방법론

<br>

그렇다면 "**테스트를 잘 작성하기 위해서는 어느 방법을 준수해야할까?**" 이 질문에 대해 고민한다면, 우리는 테스트의 목표를 잊고서 잘못된 방향으로 나아가게 될 수도 있다. 

- 프로덕션 코드 자체가 아닌 테스트 자체를 더 잘 작성하기 위한 방법을 고민하게된다.


<br>

테스트를 작성하는 것은 테스트를 더 잘 작성하기 위함이 아니다. 테스트 코드는 높은 품질과 효율성을 추구하며, 코드의 유지보수성과 신뢰성을 향상시키는 역할을 한다.

- **품질 향상:** 양질의 코드를 작성하고 시스템이 예상대로 동작하는지 확인함으로써 품질을 향상시킬 수 있다.
- **빠른 피드백:** 테스트를 먼저 작성하고 실행함으로써 빠른 시점에서 코드의 오류를 발견하고 수정할 수 있다. 
- **설계 개선:** 코드를 작성하기 전에 테스트를 고려하면서 개발하므로 코드의 설계를 개선하고 유연한 코드를 작성할 수 있다.

<br>

따라서 우리는 테스트를 더 잘 작성하기 위한 방법을 고민하는 것이 아닌, 올바른 테스트를 작성하는 방법을 고민해야 한다.

-  **목적은 무엇인가?**
    - 테스트의 목적을 명확하게 이해하고, 해당 목적에 부합하는 테스트를 작성한다.

- **어떤 시나리오를 테스트해야 하는가?**
    - 테스트 케이스를 정의할 때 어떤 상황이나 시나리오를 검증해야 하는지 명확히 이해하고 작성한다.
    - 다양한 시나리오를 포함하여 코드의 다양한 측면을 테스트한다.
    - 테스트가 버그를 찾는데 도움이 되지 않는다면 해당 테스트는 실패한 테스트이다.

-  **어떤 입력 값을 사용해야 하는가?**
    - 다양한 입력 값에 대한 테스트를 작성하여 코드의 강건성과 안정성을 확인인해야 한다.

-  **어떤 결과를 기대하는가?**
    - 테스트가 성공했을 때 어떤 결과를 기대하는지 명확하게 정의하고, 예상 결과와 실제 결과를 일치해야한다.

- **테스트 코드의 가독성과 유지보수성은 어떠한가?**
	- 테스트 코드도 프로덕션 코드와 동등한 수준의 까지는 아니지만 가독성과 유지보수성을 유지해야 한다.
	- 테스트를 분명하고 이해하기 쉽게 작성할 경우, 테스트 코드 자체가 명세서 혹은 문서로서의 역할을 할 수 있다.

- **작성하는 테스트 코드는 필요한 테스트 코드인가?**
    - 테스트는 필요한 경우에만 작성되어야 한다. 불필요한 테스트 코드는 오히려 혼란을 야기할 수 있다.

-  **테스트 코드는 격리되어 있는가?** 
    - 테스트 간의 의존성을 최소화하고 테스트가 격리되도록 작성해야 한다..

- **테스트 코드는 지속적으로 유지보수되고 있는가?**
    - 변경된 요구사항이나 코드 수정에 따라 테스트 코드를 업데이트하고 유지보수되어야 한다.

- **테스트는 빠르게 실행될 수 있는가?**
    - 빠른 피드백을 얻기 위해 테스트가 빠르게 실행되어야 한다.


<br>

> 팁 1.  경계를 존중하라.

테스트를 작성할 때, 테스트의 목적(대상을 분명히) 하기 위해서는 항상 명세서부터 시작하는 것이 좋다. 하지만 명세서가 존재하지 않거나, 아주 오래전에 사용된 경우라면, 경계조건에서 시작하는 것이 좋은 선택이 될 수 있다.

<br>

> 팁 2. 코드 커버리지

코드 커버리지 도구는 테스트 할 때 코드의 어떤 부분이 실행되었는지 알려준다. 모든 코드 경로를 실행하기 위해 놓치고 있는 테스트 범위를 확인하기에 매우 편리한 도구이다. 그러나 코드 커버리지 100% 가 100% 테스트 적용 범위를 의미하는 것은 아니다.

- 코드 커버리지에만 의존하여 모든 범위를 채우려고해서는 안된다.
- 가능한 모든 입력을 고려하고 경계 값을 현명하게 처리하며 테스트 적용 범위를 의식하고 있어야 한다.

<br>

> 팁 3. 모든 테스트를 작성하려고 하지 않는다.

파레토의 법칙(결과의 80%가 20%의 원인에서 나온다.)를 테스트에도 적용하여, 20%의 커버리지로 80%의 신뢰성을 얻을 수 있다.

- 버그는 균일하게 발생하지 않는다.(모든 코드 라인이 버그가 발생할 확률을 동일하게 가지는 것은 아니다.)
- 핫 패스(hot path, 문제가 발생할 가능성이 높은 코드 영역)을 파악하고, 이에 대한 테스트를 작성하여 버그가 발생할 가능성이 높은 코드를 테스트 하는 것이 중요하다.
