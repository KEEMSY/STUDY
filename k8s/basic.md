# K8S Basic
*쿠버네티스는 여러 머신을 위한 docker-compose와 유사하다.*

k8s는 자동 배포, 스케일링 조정 및 로드밸런싱, 관리를 한곳에서 할 수 있는 오픈 시스템이다.(컨테이너 조정 및 배포를 위한 시스템이다.)




<br><hr><hr><br>

## **구성요소**

<br>

> ### **마스터 노드**
- **kubectl**
    
    쿠버네티스 클러스터에 명령을 내리는 역할을 한다. 다른 구성요소들과 다르게 바로 실행되는 명령 형태인 바이너리(binary)로 배포되기 때문에 마스터 노드에 있을 필요는 없다. 하지만 통상적으로 주로 API 서버와 통신하므로 API 서버가 위치한 마스터 노드에 구성하는 경우가 존재한다.

    <br>

- **API 서버**

    쿠버네티스 클러스터의 중심 역할을 하는 통로이다. 회사에 비유하자면 모든 직원과 상황을 관리하고 목표를 설정하는 관리자에 해당한다.


    <br>

- **etcd**(etc + distributed(퍼뜨렸다.))

    구성 요소들의 상태 값이 모두 저장되는 곳으로, 회사의 관리자가 모든 보고 내용을 기록하는 노트라고 생각하면 된다. 
    
    etcd의 정보만 백업되어 있다면 긴급한 장애 상황에서도 쿠버네티스 클러스터를 복구 할 수 있다.

    또한 etcd는 분산 저장이 가능한 key-value 저장소 이므로, 복제해 여러 곳에 저장해두면 하나의 etcd에서 장애가 나더라도 시스템의 가용성을 확보할 수 있다.

    <br>

- **컨트롤러 매니저**

    쿠버네티스 클러스터의 오브젝트 상태를 관리한다.

    워커 노드에서 통신이 되지 앟는 경우, 상태 체크와 복구는 컨트롤러 매니저에 속한 노드 컨트롤러에서 이루어진다.

    레플리카셋 컨트롤러는 레플리카셋에 요청받은 파드 개수대로 파드를 생성한다. 

    <br>

- **스케줄러**

    노드의 상태와 자원, 레이블, 요구 조건등을 고려해 파드를 어떤 워커 노드에 생성할 것인지를 결정하고 할당한다. 스케줄러라는 일므에 걸맞게 파드를 조건에 맞는 워커 노드에 지정하고, 파드가 워커 노드에 할당되는 일정을 관리하는 역할을 담당한다.

<br><hr><br>